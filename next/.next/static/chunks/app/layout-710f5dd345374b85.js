(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{24629:function(e,t,r){Promise.resolve().then(r.bind(r,9273)),Promise.resolve().then(r.bind(r,84301)),Promise.resolve().then(r.bind(r,86907)),Promise.resolve().then(r.t.bind(r,46685,23)),Promise.resolve().then(r.bind(r,51718)),Promise.resolve().then(r.bind(r,44370)),Promise.resolve().then(r.bind(r,89446)),Promise.resolve().then(r.bind(r,55893)),Promise.resolve().then(r.bind(r,81066)),Promise.resolve().then(r.t.bind(r,12926,23)),Promise.resolve().then(r.t.bind(r,76873,23)),Promise.resolve().then(r.t.bind(r,76612,23)),Promise.resolve().then(r.t.bind(r,32632,23))},84301:function(e,t,r){"use strict";r.r(t);var s=r(57437),n=r(2265),a=r(81792),i=r(24033);t.default=e=>{let{children:t}=e,r=n.useMemo(()=>(0,a.createCache)(),[a.createCache]);return(0,i.useServerInsertedHTML)(()=>(0,s.jsx)("style",{id:"antd",dangerouslySetInnerHTML:{__html:(0,a.extractStyle)(r,!0)}})),(0,s.jsx)(a.StyleProvider,{cache:r,children:t})}},15919:function(e,t,r){"use strict";r.d(t,{M:function(){return a},W:function(){return n}});var s=r(29222);let n=s.Z.create({baseURL:"http://127.0.0.1:3000/api"}),a=s.Z.create({baseURL:"http://127.0.0.1:1337/api"})},55893:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var s=r(57437),n=r(2265),a=r(33071),i=r(32142),l=r(88110),o=r.n(l),c=r(16681),u=r(79404),d=r(43574),m=r(95708),h=r(69769),p=r.n(h),x=r(45200),f=e=>{let{registration:t,setRegistration:r}=e,[a,i]=n.useState(""),[l,h]=n.useState(""),[f,_]=n.useState(""),[j,v]=n.useState(!1);return t?j?(0,s.jsx)(m.ZP,{className:p().result,status:"success",title:"Вы успешно зарегистрировались!"}):(0,s.jsxs)(u.Z,{className:p().root,name:"basic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{remember:!0},autoComplete:"off",children:[(0,s.jsx)(u.Z.Item,{label:"Логин",children:(0,s.jsx)(d.default,{onChange:e=>i(e.target.value)})}),(0,s.jsx)(u.Z.Item,{label:"Email",children:(0,s.jsx)(d.default,{onChange:e=>h(e.target.value)})}),(0,s.jsx)(u.Z.Item,{label:"Пароль",children:(0,s.jsx)(d.default.Password,{onChange:e=>_(e.target.value)})}),(0,s.jsxs)("div",{className:p().text,children:["Есть аккаунт? ",(0,s.jsx)("span",{onClick:()=>r(!1),children:"Авторизуйся!"})]}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,s.jsx)(o(),{type:"primary",style:{marginRight:"-70px"},onClick:()=>{(0,x.mM)(a,l,f,v)},children:"Зарегистрироваться"})})]}):(0,s.jsxs)(u.Z,{className:p().root,name:"basic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{remember:!0},autoComplete:"off",children:[(0,s.jsx)(u.Z.Item,{label:"Логин",children:(0,s.jsx)(d.default,{onChange:e=>i(e.target.value)})}),(0,s.jsx)(u.Z.Item,{label:"Пароль",children:(0,s.jsx)(d.default.Password,{onChange:e=>_(e.target.value)})}),(0,s.jsx)(u.Z.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:(0,s.jsx)(c.Z,{children:"Запомнить меня"})}),(0,s.jsxs)("div",{className:p().text,children:[" Нет аккаунта? ",(0,s.jsx)("span",{onClick:()=>r(!0),children:"Зарегистрируйся!"})]}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,s.jsx)(o(),{type:"primary",style:{marginRight:"-70px",marginTop:"20px"},onClick:()=>(0,x.bu)(a,f),children:"Авторизоваться"})})]})},_=e=>{let{user:t}=e,[r,l]=(0,n.useState)(!1),[o,c]=n.useState(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{onClick:()=>{l(!0)},children:[(0,s.jsx)("div",{children:(0,s.jsx)(i.Z,{style:{fontSize:"24px",cursor:"pointer"}})}),(0,s.jsx)("div",{children:"Войти"})]}),(0,s.jsx)(a.Z,{footer:null,title:o?"Регистрация":"Авторизация",open:r,onCancel:()=>{l(!1)},children:(0,s.jsx)("div",{style:{margin:"50px 90px 0 0"},children:(0,s.jsx)(f,{registration:o,setRegistration:c})})})]})}},44370:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var s=r(57437),n=r(2265),a=r(33071),i=r(32142),l=r(75204),o=r(88110),c=r.n(o),u=r(16681),d=r(79404),m=r(43574),h=r(95708),p=r(24181),x=r.n(p),f=r(45200),_=r(24033),j=e=>{let{registration:t,setRegistration:r,setIsModalOpen:a}=e,[i,l]=n.useState(""),[o,p]=n.useState(""),[j,v]=n.useState(""),[b,g]=n.useState(!1),y=(0,_.useRouter)();return t?b?(0,s.jsx)(h.ZP,{className:x().result,status:"success",title:"Вы успешно зарегистрировались!"}):(0,s.jsxs)(d.Z,{className:x().root,name:"basic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{remember:!0},autoComplete:"off",children:[(0,s.jsx)(d.Z.Item,{label:"Логин",children:(0,s.jsx)(m.default,{onChange:e=>l(e.target.value)})}),(0,s.jsx)(d.Z.Item,{label:"Email",children:(0,s.jsx)(m.default,{onChange:e=>p(e.target.value)})}),(0,s.jsx)(d.Z.Item,{label:"Пароль",children:(0,s.jsx)(m.default.Password,{onChange:e=>v(e.target.value)})}),(0,s.jsxs)("div",{className:x().text,children:["Есть аккаунт? ",(0,s.jsx)("span",{onClick:()=>{r(!1)},children:"Авторизуйся!"})]}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,s.jsx)(c(),{type:"primary",style:{marginRight:"-70px"},onClick:()=>{(0,f.z2)(i,o,j,g,y,a)},children:"Зарегистрироваться"})})]}):(0,s.jsxs)(d.Z,{className:x().root,name:"basic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{remember:!0},autoComplete:"off",children:[(0,s.jsx)(d.Z.Item,{label:"Логин",children:(0,s.jsx)(m.default,{onChange:e=>l(e.target.value)})}),(0,s.jsx)(d.Z.Item,{label:"Пароль",children:(0,s.jsx)(m.default.Password,{onChange:e=>v(e.target.value)})}),(0,s.jsx)(d.Z.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:(0,s.jsx)(u.Z,{children:"Запомнить меня"})}),(0,s.jsxs)("div",{className:x().text,children:[" Нет аккаунта? ",(0,s.jsx)("span",{onClick:()=>{r(!0)},children:"Зарегистрируйся!"})]}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,s.jsx)(c(),{type:"primary",style:{marginRight:"-70px",marginTop:"20px"},onClick:()=>{(0,f.I8)(i,j,y,a)},children:"Авторизоваться"})})]})},v=r(61396),b=r.n(v),g=r(58393),y=r.n(g),C=e=>{let{user:t}=e,[r,o]=(0,n.useState)(!1),[c,u]=n.useState(!1),[d,m]=n.useState(!1),h=(0,_.useRouter)(),p=e=>{o(!1)};return(0,s.jsxs)("div",{className:y().root,children:[t?(0,s.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[(0,s.jsx)("div",{style:{alignSelf:"center"},children:t.username}),(0,s.jsxs)("div",{onClick:()=>m(!d),className:y().account,children:[(0,s.jsx)("div",{children:(0,s.jsx)(l.Z,{style:{fontSize:"24px",cursor:"pointer"}})}),(0,s.jsx)("div",{onClick:e=>e.stopPropagation(),className:d?y().submenu+" "+y().submenu_hover:y().submenu,children:(0,s.jsxs)("ul",{className:d?y().submenu_list+" "+y().submenu_list_hover:y().submenu_list,children:[(0,s.jsx)(b(),{onClick:()=>m(!1),href:"/account",children:(0,s.jsx)("li",{className:y().submenu_item,children:"Личный кабинет"})}),(0,s.jsx)("li",{onClick:()=>(0,f.kS)(h,m),className:y().submenu_item,children:"Выйти"})]})})]})]}):(0,s.jsx)(i.Z,{onClick:()=>{o(!0)},style:{fontSize:"24px",cursor:"pointer"}}),(0,s.jsx)(a.Z,{footer:null,title:c?"Регистрация":"Авторизация",open:r,onCancel:e=>p(e),children:(0,s.jsx)("div",{style:{margin:"50px 90px 0 0"},children:(0,s.jsx)(j,{registration:c,setRegistration:u,setIsModalOpen:o})})}),d&&(0,s.jsx)("div",{className:y().fade,onClick:()=>m(!d)})]})}},89446:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var s=r(57437),n=r(6702),a=r.n(n),i=r(2265),l=r(95022),o=r(88110),c=r.n(o),u=r(40155),d=r(21161),m=r(54760),h=r(48749),p=r(95020),x=r(82993),f=r(17098),_=r(60077),j=r(16691),v=r.n(j),b=r(45200),g=r(15919),y=r(79404),C=r(43574),Z=r(27537),N=e=>{let{close:t,closeChild:r,openNotification:n}=e,a=(0,x.T)(),{items:l,totalPrice:o}=(0,x.C)(e=>e.cart),[u,d]=i.useState(""),[m,h]=i.useState(""),[p,_]=i.useState(""),j=async()=>{try{if(!(l.length>0)||!u||!m||!p)return console.log("Корзина пуста");{let e=l.map((e,t)=>"№".concat(t+1,". ID: ").concat(e.id," Название: ").concat(e.name," Цена:").concat(e.price," Кол-во:").concat(e.count,"\n")).join("")+"Общая сумма: ".concat(o),s=await g.M.post("/orders",{data:{username:u,address:m,phoneNumber:p,orderText:e}});200===s.status&&(setTimeout(n,500),a((0,f.H5)()),d(""),h(""),_(""),r(),t())}}catch(e){console.error(e)}};return(0,s.jsxs)(y.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},initialValues:{remember:!0},autoComplete:"off",children:[(0,s.jsx)(y.Z.Item,{label:"Имя",name:"username",children:(0,s.jsx)(C.default,{onChange:e=>d(e.target.value),value:u})}),(0,s.jsx)(y.Z.Item,{label:"Телефон",name:"number",children:(0,s.jsx)(C.default,{onChange:e=>_(e.target.value),value:p})}),(0,s.jsx)(y.Z.Item,{label:"Адрес",name:"adress",children:(0,s.jsx)(Z.Z,{onChange:e=>h(e.target.value),value:m,rows:4})}),(0,s.jsx)(y.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,s.jsx)(c(),{onClick:j,type:"primary",htmlType:"submit",children:"Отправить заявку"})})]})},P=e=>{let{user:t}=e,[r,n]=(0,i.useState)(!1),[o,j]=(0,i.useState)(!1),g=(0,x.T)(),{items:y,totalCount:C,totalPrice:Z}=(0,x.C)(e=>e.cart),[P,S]=h.ZP.useNotification(),I=()=>{n(!1)},w=()=>{j(!1)};i.useEffect(()=>{let e=async()=>{var e,r;let s=null==t?void 0:null===(r=t.cart)||void 0===r?void 0:null===(e=r.items)||void 0===e?void 0:e.items,n=localStorage.getItem("cartItems");if((null==s?void 0:s.length)>0)g((0,f.yh)(s));else if(n){let e=await JSON.parse(n);g((0,f.yh)(e))}};e()},[]),i.useEffect(()=>{y.length>0&&localStorage.setItem("cartItems",JSON.stringify(y)),t&&(0,b.Xq)(t,y)},[y]);let k=(0,s.jsxs)("div",{className:a().footer,children:[" ",(0,s.jsxs)("p",{children:["Итого: ",Z]}),(0,s.jsx)(c(),{onClick:()=>{j(!0)},children:"заказать "}),(0,s.jsx)(d.Z,{title:"Оформить заказ",placement:"right",open:o,onClose:w,children:(0,s.jsx)(N,{close:I,closeChild:w,openNotification:()=>{P.success({message:"Спасибо за заказ!",description:(0,s.jsx)("div",{children:"Менеджер свяжется с вами в ближайшее время"}),placement:"topRight"})}})})]});return(0,s.jsxs)("div",{children:[S,(0,s.jsx)(l.Z,{size:"small",count:C,children:(0,s.jsx)(p.Z,{style:{fontSize:"24px"},onClick:()=>{n(!0)}})}),(0,s.jsx)(d.Z,{className:a().drawer,footer:y.length>0?k:null,title:(0,s.jsx)("div",{className:a().header,children:"Корзина"}),placement:"right",onClose:I,open:r,children:y.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:a().root,children:[(0,s.jsx)(v(),{width:100,height:100,alt:"",src:"http://localhost:1337".concat(e.image)}),(0,s.jsx)("h3",{className:a().title,children:e.name}),(0,s.jsxs)("p",{className:a().price,children:["цена: ",e.price,"p"]}),(0,s.jsx)("p",{className:a().count,children:"кол-во:"}),(0,s.jsxs)("div",{className:a().buttons,children:[(0,s.jsx)(m.Z,{onChange:t=>t>0?g((0,f.uz)({id:e.id,count:t})):g((0,f.cl)(e)),value:e.count}),(0,s.jsx)(c(),{shape:"circle",onClick:()=>g((0,f.cl)(e)),children:(0,s.jsx)(_.default,{})})]})]}),(0,s.jsx)(u.Z,{})]},e.id))})]})}},81066:function(e,t,r){"use strict";r.r(t);var s=r(57437),n=r(82993),a=r(91330),i=r(2265);t.default=e=>{let{user:t}=e,r=(0,n.T)();return i.useEffect(()=>{t&&r((0,a.av)(t))},[]),(0,s.jsx)(s.Fragment,{})}},86907:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(57437),n=r(3198),a=r(98340),i=r(17098),l=r(40382),o=r(91330);let c=(0,a.xC)({reducer:{user:o.ZP,filters:l.ZP,cart:i.ZP}});r(2265);var u=e=>{let{children:t}=e;return(0,s.jsx)(n.zt,{store:c,children:t})}},82993:function(e,t,r){"use strict";r.d(t,{C:function(){return a},T:function(){return n}});var s=r(3198);let n=s.I0,a=s.v9},17098:function(e,t,r){"use strict";r.d(t,{H5:function(){return c},cl:function(){return l},jX:function(){return a},uz:function(){return i},yh:function(){return o}});var s=r(98340);let n=(0,s.oM)({name:"cart",initialState:{items:[],totalCount:0,totalPrice:0},reducers:{addItem:(e,t)=>{let r=e.items.find(e=>e.id===t.payload.id);r?r.count++:e.items.push(t.payload),e.totalPrice=e.items.reduce((e,t)=>e+t.price*t.count,0),e.totalCount=e.items.reduce((e,t)=>e+t.count,0)},minusItem:(e,t)=>{let r=e.items.find(e=>e.id===t.payload.id);r&&(r.count=t.payload.count),e.totalPrice=e.items.reduce((e,t)=>e+t.price*t.count,0),e.totalCount=e.items.reduce((e,t)=>e+t.count,0)},removeItem:(e,t)=>{let r=e.items.find(e=>e.id===t.payload.id);r&&(e.items=e.items.filter(e=>e.id!==t.payload.id)),e.totalPrice=e.items.reduce((e,t)=>e+t.price*t.count,0),e.totalCount=e.items.reduce((e,t)=>e+t.count,0)},replaceItems:(e,t)=>{e.items=t.payload,e.totalPrice=e.items.reduce((e,t)=>e+t.price*t.count,0),e.totalCount=e.items.reduce((e,t)=>e+t.count,0)},clearItems:e=>{e.items=[],e.totalPrice=0,e.totalCount=0}}}),{addItem:a,minusItem:i,removeItem:l,replaceItems:o,clearItems:c}=n.actions;t.ZP=n.reducer},40382:function(e,t,r){"use strict";r.d(t,{YA:function(){return a}});var s=r(98340);let n=(0,s.oM)({name:"filters",initialState:{sort:"",search:"",brand:"",page:0},reducers:{setPage:(e,t)=>{e.page=t.payload}}}),{setPage:a}=n.actions;t.ZP=n.reducer},91330:function(e,t,r){"use strict";r.d(t,{av:function(){return i}});var s=r(98340);let n=(0,s.oM)({name:"user",initialState:{isAuth:!1,id:null,username:"",email:""},reducers:{setIsAuth:(e,t)=>{e.isAuth=t.payload},setUser:(e,t)=>{e.id=t.payload.id,e.username=t.payload.username,e.email=t.payload.email,e.isAuth=!0}}}),{setIsAuth:a,setUser:i}=n.actions;t.ZP=n.reducer},45200:function(e,t,r){"use strict";r.d(t,{I8:function(){return i},IO:function(){return u},Ir:function(){return m},NC:function(){return d},PN:function(){return h},Xq:function(){return c},bu:function(){return l},kS:function(){return o},mM:function(){return a},z2:function(){return n},zx:function(){return p}});var s=r(15919);let n=async(e,t,r,n,a,i)=>{try{await s.W.post("/auth/register",{username:e,email:t,password:r}),n(!0),setTimeout(()=>{a.refresh(),i(!1)},3e3),setTimeout(()=>n(!1),3500)}catch(e){console.error(e)}},a=async(e,t,r,n)=>{try{await s.W.post("/auth/register",{username:e,email:t,password:r}),n(!0),setTimeout(()=>n(!1),3500)}catch(e){console.error(e)}},i=async(e,t,r,n)=>{try{let{data:a}=await s.W.post("/auth/login",{identifier:e,password:t});return r.refresh(),n(!1),a}catch(e){console.error(e.message)}},l=async(e,t)=>{try{let{data:r}=await s.W.post("/auth/login",{identifier:e,password:t});return r}catch(e){console.error(e.message)}},o=async(e,t)=>{try{await s.W.post("/auth/logout"),e.refresh(),t(!1)}catch(e){console.error(e)}},c=async(e,t)=>{var r;await s.W.put("/cart",{id:null==e?void 0:null===(r=e.cart)||void 0===r?void 0:r.id,items:t})},u=async(e,t,r,n,a,i,l)=>{!r||n||a?n&&(await s.W.put("/rating",{value:e,id:n,device:t}),l.refresh()):(await s.W.post("/rating",{value:e,device:t,users_permissions_user:r}),l.refresh())},d=async(e,t)=>{if(t)try{let r=await s.M.get("/ratings",{params:{filters:{users_permissions_user:{id:t},device:{id:e}}}});return r}catch(e){console.error(e)}},m=async(e,t,r,n)=>{try{r&&await s.W.post("/comment",{text:e,device:t,user:r}),n.refresh()}catch(e){console.error(e)}},h=async(e,t,r)=>{try{await s.W.post("/comment",{device:e,user:t}),r.refresh()}catch(e){console.error(e)}},p=async(e,t,r,n,a,i)=>{try{await s.W.put("/account",{userID:e,dataType:t,dataValue:r}),n.refresh(),a(""),i("")}catch(e){console.error(e)}}},76873:function(){},76612:function(e){e.exports={root:"Header_root__hagAA",navbar:"Header_navbar__sgcPx",leftBlock:"Header_leftBlock__a7hGW",logo:"Header_logo__V9h3K",rightBlock:"Header_rightBlock__oRj6D",mobileNavbar:"Header_mobileNavbar__vcSQh"}},32632:function(e){e.exports={root:"MobileNavbar_root__HHPIJ",menu:"MobileNavbar_menu__y0k9j",item:"MobileNavbar_item__Pg7iq"}},69769:function(e){e.exports={root:"AuthForm_root__rTOjl",text:"AuthForm_text__Ua3Nm",result:"AuthForm_result__RdBrb"}},58393:function(e){e.exports={root:"auth_root__CxtUb",account:"auth_account__IgNOp",submenu:"auth_submenu__fZb0b",submenu_list:"auth_submenu_list__p5QaZ",submenu_hover:"auth_submenu_hover__WhCtl",submenu_list_hover:"auth_submenu_list_hover__znL0z",submenu_item:"auth_submenu_item__Dq8iR",fade:"auth_fade__om83l"}},24181:function(e){e.exports={root:"AuthForm_root__1TpPb",text:"AuthForm_text__VkOAA",result:"AuthForm_result__gweEN"}},6702:function(e){e.exports={root:"Cart_root__i6EuB",title:"Cart_title__KFjWo",price:"Cart_price__oqlpD",count:"Cart_count__U3wLV",buttons:"Cart_buttons__6aSPs",drawer:"Cart_drawer__fjyQE",header:"Cart_header__KGnEX",footer:"Cart_footer__C4___"}}},function(e){e.O(0,[377,222,599,927,685,516,556,971,596,744],function(){return e(e.s=24629)}),_N_E=e.O()}]);