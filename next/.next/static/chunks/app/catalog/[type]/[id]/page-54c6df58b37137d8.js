(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[294],{50189:function(e,t,i){Promise.resolve().then(i.bind(i,51718)),Promise.resolve().then(i.bind(i,94211)),Promise.resolve().then(i.bind(i,79845)),Promise.resolve().then(i.bind(i,80181)),Promise.resolve().then(i.bind(i,55854)),Promise.resolve().then(i.t.bind(i,2741,23)),Promise.resolve().then(i.t.bind(i,7385,23))},15919:function(e,t,i){"use strict";i.d(t,{M:function(){return a},W:function(){return r}});var n=i(29222);let r=n.Z.create({baseURL:"http://127.0.0.1:3000/api"}),a=n.Z.create({baseURL:"http://127.0.0.1:1337/api"})},79845:function(e,t,i){"use strict";i.r(t);var n=i(57437),r=i(52955),a=i(6073),o=i.n(a),s=i(2265);t.default=e=>{let{device:t}=e,[i,a]=s.useState(0);return(0,n.jsxs)("div",{className:o().root,children:[(0,n.jsx)("div",{className:o().imagePreview,children:t.image.data.map((e,t)=>(0,n.jsx)("img",{className:t===i?o().selectedPreviewImage:o().previewImage,onClick:()=>a(t),width:100,src:"http://localhost:1337".concat(e.attributes.url),alt:""},e.id))}),(0,n.jsx)("div",{className:o().image,children:(0,n.jsx)(r.Z,{height:400,src:"http://localhost:1337".concat(t.image.data[i].attributes.url)})})]})}},80181:function(e,t,i){"use strict";i.r(t);var n=i(57437),r=i(45200),a=i(83749),o=i(2265),s=i(24033);t.default=e=>{let{deviceID:t,user:i}=e,[c,u]=o.useState(0),[l,d]=o.useState(0),[m,_]=o.useState(),[v,f]=o.useState(!1),p=(0,s.useRouter)();return(o.useEffect(()=>{let e=async()=>{var e,n,a,o;let s=await (0,r.NC)(t,null==i?void 0:i.id);d(null==s?void 0:null===(n=s.data)||void 0===n?void 0:null===(e=n.data[0])||void 0===e?void 0:e.attributes.value),_(null==s?void 0:null===(o=s.data)||void 0===o?void 0:null===(a=o.data[0])||void 0===a?void 0:a.id)};e()},[null==i?void 0:i.id,c]),i)?(0,n.jsxs)("div",{style:{fontSize:"18px",marginTop:"20px"},children:["Оцените товар:",(0,n.jsx)(a.Z,{allowClear:!1,style:{fontSize:"50px"},onChange:e=>{u(e),(0,r.IO)(e,t,null==i?void 0:i.id,m,c,v,p)},value:c||l,defaultValue:0})]}):(0,n.jsx)("div",{style:{marginTop:"40px",fontSize:"18px "},children:"Авторизуйтесь чтобы ставить оценку"})}},55854:function(e,t,i){"use strict";i.r(t);var n=i(57437),r=i(2265),a=i(88110),o=i.n(a),s=i(43574),c=i(83686),u=i.n(c),l=i(45200),d=i(32207),m=i(92608),_=i(24033);let{TextArea:v}=s.default;t.default=e=>{let{deviceID:t,comments:i,user:a}=e,[s,c]=r.useState(""),[f,p]=r.useState(!1),h=(0,_.useRouter)(),g=null==i?void 0:i.find(e=>{var t,i,n;return(null==e?void 0:null===(n=e.attributes)||void 0===n?void 0:null===(i=n.users_permissions_user)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.id)===(null==a?void 0:a.id)});return(null==a?void 0:a.id)?g&&!f?(0,n.jsxs)("div",{className:u().root,children:[(0,n.jsx)("div",{children:"Ваш отзыв:"}),(0,n.jsxs)("div",{className:u().comment,children:[(0,n.jsxs)("div",{className:u().userName,children:[a.username,":"]}),(0,n.jsx)("div",{children:g.attributes.text}),(0,n.jsx)(o(),{onClick:()=>p(!0),className:u().editBtn,children:(0,n.jsx)(d.Z,{})}),(0,n.jsx)(o(),{onClick:()=>{(0,l.PN)(t,a.id,h)},className:u().deleteBtn,children:(0,n.jsx)(m.Z,{})})]})]}):(0,n.jsxs)("div",{className:u().root,children:[(0,n.jsx)("div",{className:u().inputTitle,children:"Оставить отзыв:"}),(0,n.jsx)(v,{className:u().textArea,size:"large",showCount:!0,maxLength:200,onChange:e=>{c(e.target.value)},defaultValue:null==g?void 0:g.attributes.text}),(0,n.jsx)(o(),{onClick:()=>{(0,l.Ir)(s,t,a.id,h),p(!1)},className:u().button,children:"Отправить"})]}):(0,n.jsx)("div",{children:"Авторизуйтесь чтобы оставлять отзывы"})}},94211:function(e,t,i){"use strict";i.r(t);var n=i(57437),r=i(82993),a=i(17098),o=i(88110),s=i.n(o),c=i(33116);i(2265),t.default=e=>{let{item:t}=e,i=(0,r.T)(),[o,u]=c.ZP.useMessage(),l=()=>{o.open({type:"success",content:"Товар добавлен в корзину!"})},d=async e=>{e.stopPropagation(),i((0,a.jX)({...t,count:1})),l()};return(0,n.jsxs)(n.Fragment,{children:[u,(0,n.jsx)(s(),{onClick:e=>d(e),children:"В корзину"})]})}},82993:function(e,t,i){"use strict";i.d(t,{C:function(){return a},T:function(){return r}});var n=i(3198);let r=n.I0,a=n.v9},17098:function(e,t,i){"use strict";i.d(t,{H5:function(){return u},cl:function(){return s},jX:function(){return a},uz:function(){return o},yh:function(){return c}});var n=i(98340);let r=(0,n.oM)({name:"cart",initialState:{items:[],totalCount:0,totalPrice:0},reducers:{addItem:(e,t)=>{let i=e.items.find(e=>e.id===t.payload.id);i?i.count++:e.items.push(t.payload),e.totalPrice=e.items.reduce((e,t)=>e+t.price*t.count,0),e.totalCount=e.items.reduce((e,t)=>e+t.count,0)},minusItem:(e,t)=>{let i=e.items.find(e=>e.id===t.payload.id);i&&(i.count=t.payload.count),e.totalPrice=e.items.reduce((e,t)=>e+t.price*t.count,0),e.totalCount=e.items.reduce((e,t)=>e+t.count,0)},removeItem:(e,t)=>{let i=e.items.find(e=>e.id===t.payload.id);i&&(e.items=e.items.filter(e=>e.id!==t.payload.id)),e.totalPrice=e.items.reduce((e,t)=>e+t.price*t.count,0),e.totalCount=e.items.reduce((e,t)=>e+t.count,0)},replaceItems:(e,t)=>{e.items=t.payload,e.totalPrice=e.items.reduce((e,t)=>e+t.price*t.count,0),e.totalCount=e.items.reduce((e,t)=>e+t.count,0)},clearItems:e=>{e.items=[],e.totalPrice=0,e.totalCount=0}}}),{addItem:a,minusItem:o,removeItem:s,replaceItems:c,clearItems:u}=r.actions;t.ZP=r.reducer},45200:function(e,t,i){"use strict";i.d(t,{I8:function(){return o},IO:function(){return l},Ir:function(){return m},NC:function(){return d},PN:function(){return _},Xq:function(){return u},bu:function(){return s},kS:function(){return c},mM:function(){return a},z2:function(){return r},zx:function(){return v}});var n=i(15919);let r=async(e,t,i,r,a,o)=>{try{await n.W.post("/auth/register",{username:e,email:t,password:i}),r(!0),setTimeout(()=>{a.refresh(),o(!1)},3e3),setTimeout(()=>r(!1),3500)}catch(e){console.error(e)}},a=async(e,t,i,r)=>{try{await n.W.post("/auth/register",{username:e,email:t,password:i}),r(!0),setTimeout(()=>r(!1),3500)}catch(e){console.error(e)}},o=async(e,t,i,r)=>{try{let{data:a}=await n.W.post("/auth/login",{identifier:e,password:t});return i.refresh(),r(!1),a}catch(e){console.error(e.message)}},s=async(e,t)=>{try{let{data:i}=await n.W.post("/auth/login",{identifier:e,password:t});return i}catch(e){console.error(e.message)}},c=async(e,t)=>{try{await n.W.post("/auth/logout"),e.refresh(),t(!1)}catch(e){console.error(e)}},u=async(e,t)=>{var i;await n.W.put("/cart",{id:null==e?void 0:null===(i=e.cart)||void 0===i?void 0:i.id,items:t})},l=async(e,t,i,r,a,o,s)=>{!i||r||a?r&&(await n.W.put("/rating",{value:e,id:r,device:t}),s.refresh()):(await n.W.post("/rating",{value:e,device:t,users_permissions_user:i}),s.refresh())},d=async(e,t)=>{if(t)try{let i=await n.M.get("/ratings",{params:{filters:{users_permissions_user:{id:t},device:{id:e}}}});return i}catch(e){console.error(e)}},m=async(e,t,i,r)=>{try{i&&await n.W.post("/comment",{text:e,device:t,user:i}),r.refresh()}catch(e){console.error(e)}},_=async(e,t,i)=>{try{await n.W.post("/comment",{device:e,user:t}),i.refresh()}catch(e){console.error(e)}},v=async(e,t,i,r,a,o)=>{try{await n.W.put("/account",{userID:e,dataType:t,dataValue:i}),r.refresh(),a(""),o("")}catch(e){console.error(e)}}},2741:function(e){e.exports={root:"Device_root__QwU5d",description:"Device_description__3iqxZ",imageViewer:"Device_imageViewer__u7dVY",icon:"Device_icon__5kfnT",name:"Device_name__uUwRn",rating:"Device_rating__zYEkR",comments:"Device_comments__bLjzz",price:"Device_price__rvSaF"}},6073:function(e){e.exports={root:"ImageViewer_root__pTqX4",imagePreview:"ImageViewer_imagePreview__qW37G",previewImage:"ImageViewer_previewImage__tjhPi",selectedPreviewImage:"ImageViewer_selectedPreviewImage__9AMDq",image:"ImageViewer_image__ooWPn"}},7385:function(e){e.exports={root:"Comments_root__8BRrL",title:"Comments_title__8fqLj",inputTitle:"Comments_inputTitle__F0MgW",input:"Comments_input__5EZR_",comment:"Comments_comment__0uFGy",userName:"Comments_userName__0zqFx"}},83686:function(e){e.exports={root:"addComment_root__3M6Za",inputTitle:"addComment_inputTitle__ITyfC",textArea:"addComment_textArea__LhqrG",button:"addComment_button__qJPgW",comment:"addComment_comment__yT9Za",deleteBtn:"addComment_deleteBtn__PmR4b",editBtn:"addComment_editBtn__FfwPv",userName:"addComment_userName__6fPF5"}}},function(e){e.O(0,[377,599,927,947,516,593,971,596,744],function(){return e(e.s=50189)}),_N_E=e.O()}]);